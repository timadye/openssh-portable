diff --git a/CMakeLists.txt b/CMakeLists.txt
index 2630e26..128e32a 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -170,7 +170,14 @@ if(UNIX)
 endif()
 
 
-if(MSVC)
+find_package(libcbor CONFIG REQUIRED)
+set(CBOR_LIBRARIES libcbor::libcbor)
+find_package(ZLIB REQUIRED)
+set(ZLIB_LIBRARIES ZLIB::ZLIB)
+find_package(OpenSSL REQUIRED)
+set(CRYPTO_LIBRARIES OpenSSL::Crypto)
+add_definitions("-D_CRT_SECURE_NO_WARNINGS" "-D_CRT_NONSTDC_NO_DEPRECATE")
+if(0)
 	if((NOT CBOR_INCLUDE_DIRS) OR (NOT CBOR_LIBRARY_DIRS) OR
 	   (NOT CRYPTO_INCLUDE_DIRS) OR (NOT CRYPTO_LIBRARY_DIRS) OR
 	   (NOT ZLIB_INCLUDE_DIRS) OR (NOT ZLIB_LIBRARY_DIRS))
@@ -195,7 +202,7 @@ if(MSVC)
 	if(NOT CRYPTO_DLL)
 		set(CRYPTO_DLL crypto)
 	endif()
-
+elseif(MSVC)
 	set(MSVC_DISABLED_WARNINGS_LIST
 		"C4152" # nonstandard extension used: function/data pointer
 			# conversion in expression;
@@ -205,7 +212,7 @@ if(MSVC)
 		"C4204" # nonstandard extension used: non-constant aggregate
 			# initializer;
 		"C4706" # assignment within conditional expression;
-		"C4996" # The POSIX name for this item is deprecated. Instead,
+		# do not disable - "C4996" # The POSIX name for this item is deprecated. Instead,
 			# use the ISO C and C++ conformant name;
 		"C6287" # redundant code: the left and right subexpressions are identical
 		)
@@ -221,7 +228,7 @@ if(MSVC)
 		add_definitions(-DUSE_WINHELLO)
 	endif()
 	set(NFC_LINUX OFF)
-else()
+elseif(0)
 	include(FindPkgConfig)
 	pkg_search_module(CBOR libcbor)
 	pkg_search_module(CRYPTO libcrypto)
@@ -243,7 +250,7 @@ else()
 	if(NOT CRYPTO_LIBRARIES)
 		set(CRYPTO_LIBRARIES "crypto")
 	endif()
-
+elseif(1)
 	if(CMAKE_SYSTEM_NAME STREQUAL "Linux")
 		pkg_search_module(UDEV libudev REQUIRED)
 		set(UDEV_NAME "udev")
